name: Build Packages (Reusable)

on:
  workflow_call:
    inputs:
      build-tests:
        description: 'Build with tests enabled'
        required: false
        type: boolean
        default: false
      is-release:
        description: 'Mark as release build'
        required: false
        type: boolean
        default: false
      version:
        description: 'Version string (for release builds)'
        required: false
        type: string
        default: 'dev'

jobs:
  build-windows:
    name: Build Windows
    uses: ./.github/workflows/build-windows.yml
    with:
      build-tests: ${{ inputs.build-tests }}
      is-release: ${{ inputs.is-release }}
      version: ${{ inputs.version }}

  build-macos:
    name: Build macOS
    uses: ./.github/workflows/build-macos.yml
    with:
      build-tests: ${{ inputs.build-tests }}
      is-release: ${{ inputs.is-release }}
      version: ${{ inputs.version }}

  build-flatpak:
    name: Build Flatpak
    uses: ./.github/workflows/build-flatpak.yml
    with:
      build-tests: ${{ inputs.build-tests }}
      is-release: ${{ inputs.is-release }}
      version: ${{ inputs.version }}
